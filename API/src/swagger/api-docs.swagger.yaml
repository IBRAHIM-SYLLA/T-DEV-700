openapi: 3.0.0

info:
  title: TimeManager API
  description: API de gestion des utilisateurs, √©quipes et pointages
  version: 1.0.0

servers:
  - url: http://localhost:5001
    description: Serveur local

# üîê S√©curit√© globale (JWT)
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

security:
  - bearerAuth: []

# üè∑Ô∏è Tags globaux
# tags:
#   - name: Auth
#     description: Authentification et gestion des sessions
#   - name: Users
#     description: Gestion des utilisateurs
#   - name: Teams
#     description: Gestion des √©quipes
#   - name: Clocks
#     description: Gestion des pointages
#   - name: Reports
#     description: Reporting et indicateurs KPI

paths:
  # ===== AUTH =====
  /api/auth/register:
    post:
      tags:
        - Auth
      description: Authentification et gestion des sessions
      $ref: "./auth.yaml#/paths/~1register/post"

  /api/auth/login:
    post:
      tags:
        - Auth
      description: Authentification et gestion des sessions
      $ref: "./auth.yaml#/paths/~1login/post"

  # ===== USERS =====
  /api/users:
    get:
      tags:
        - Users
      description: Gestion des utilisateurs
      $ref: "./users.yaml#/paths/~1/get"
    post:
      tags:
        - Users
      description: Gestion des utilisateurs
      $ref: "./users.yaml#/paths/~1/post"

  /api/users/{id}:
    get:
      tags:
        - Users
      description: Gestion des utilisateurs
      $ref: "./users.yaml#/paths/~1{id}/get"
    put:
      tags:
        - Users
      description: Gestion des utilisateurs
      $ref: "./users.yaml#/paths/~1{id}/put"
    delete:
      tags:
        - Users
      description: Gestion des utilisateurs
      $ref: "./users.yaml#/paths/~1{id}/delete"

  /api/users/{id}/clocks:
    get:
      tags:
        - Users
      description: Gestion des utilisateurs
      $ref: "./users.yaml#/paths/~1{id}~1clocks/get"

  # ===== TEAMS =====
  /api/teams:
    get:
      tags:
        - Teams
      description: Gestion des √©quipes
      $ref: "./teams.yaml#/paths/~1/get"
    post:
      tags:
        - Teams
      description: Gestion des √©quipes
      $ref: "./teams.yaml#/paths/~1/post"

  /api/teams/{id}:
    get:
      tags:
        - Teams
      description: Gestion des √©quipes
      $ref: "./teams.yaml#/paths/~1{id}/get"
    put:
      tags:
        - Teams
      description: Gestion des √©quipes
      $ref: "./teams.yaml#/paths/~1{id}/put"
    delete:
      tags:
        - Teams
      description: Gestion des √©quipes
      $ref: "./teams.yaml#/paths/~1{id}/delete"

  /api/teams/manager/{managerId}:
    get:
      tags:
        - Teams
      description: Gestion des √©quipes
      $ref: "./teams.yaml#/paths/~1manager~1{managerId}/get"

  # ===== CLOCKS =====
  /api/clocks:
    post:
      tags:
        - Clocks
      description: Gestion des pointages
      $ref: "./clocks.yaml#/paths/~1/post"

  # ===== REPORTS =====
  /api/reports:
    get:
      tags:
        - Reports
      description: Reporting et indicateurs KPI
      $ref: "./reports.yaml#/paths/~1/get"

  /api/reports/total-worked-time:
    get:
      tags:
        - Reports
      description: Reporting et indicateurs KPI
      $ref: "./reports.yaml#/paths/~1total-worked-time/get"

  /api/reports/average-worked-time:
    get:
      tags:
        - Reports
      description: Reporting et indicateurs KPI
      $ref: "./reports.yaml#/paths/~1average-worked-time/get"

  /api/reports/late-rate:
    get:
      tags:
        - Reports
      description: Reporting et indicateurs KPI
      $ref: "./reports.yaml#/paths/~1late-rate/get"

  /api/reports/active-users:
    get:
      tags:
        - Reports
      description: Reporting et indicateurs KPI
      $ref: "./reports.yaml#/paths/~1active-users/get"

  /api/reports/incomplete-clocks:
    get:
      tags:
        - Reports
      description: Reporting et indicateurs KPI
      $ref: "./reports.yaml#/paths/~1incomplete-clocks/get"
